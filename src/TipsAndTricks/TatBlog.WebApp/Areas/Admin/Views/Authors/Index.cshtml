@model AuthorFilterModel
@{
  ViewData["Title"] = "Danh sách tác giả";

  var authors = ViewBag.Items as IPagedList<AuthorItem>;

  var queryFilter = "";
  if (Model != null)
  {
    queryFilter = Model.GetQueryString();
  }
}
<h2>
  Danh sách tác giả
</h2>

<partial name="_AuthorFilterPane" />

@if (authors != null && authors.Count > 0)
{
  <table id="#tbl"
         class="table table-responsive table-striped table-hover">
    <thead>
      <tr>
        <th></th>
        <th>Tên tác giả</th>
        <th>Email</th>
        <th>Số bài viết</th>
        <th>Thời gian tham gia</th>
      </tr>
    </thead>
    <tbody>
      @foreach (var author in authors)
      {
        <tr>
          <td style="width:10%;">
            @if (!string.IsNullOrWhiteSpace(author.ImageUrl))
            {
              <img src="/@author.ImageUrl"
                   class="rounded-circle"
                   style="width:80px;height:80px;object-fit:cover" />
            }
            else
            {
              <img src="~/images/user-default3.png"
                   class="rounded-circle object-fit-cover "
                   style="width:80px;height:80px;object-fit:cover" />
            }
          </td>
          <td class="align-middle">
            <a asp-area="Admin"
           asp-controller="Authors"
           asp-action="Edit"
           asp-route-id="@author.Id"
               class="text-bold">
              @author.FullName
            </a>
            <p class="text-muted">
              @author.Notes
            </p>
          </td>
          <td class="align-middle">
            @author.Email
          </td>
          <td class="align-middle">
            @author.PostsCount
          </td>
          <td class="align-middle">
            @author.JoinedDate.ToString("dd/MM/yyyy hh:mm:ss")
          </td>
          <td class="align-middle">
            <a asp-area="Admin"
           asp-controller="Authors"
           asp-action="Delete"
           asp-route-filter="@queryFilter"
           asp-route-id="@author.Id"
           asp-route-p="@authors.PageNumber"
           asp-route-ps="@authors.PageSize"
               class="btn btn-danger change-status-post align-content-start"
               onclick="return confirm('Bạn có chắc chắn muốn xóa bài viết này không??')">
              Xóa
            </a>

          </td>
        </tr>
      }
    </tbody>
  </table>

  <partial name="_Pager" model="@queryFilter" />

}
else
{
  <h1 class="text-danget">
    Không tìm thấy tác giả nào
  </h1>
}
